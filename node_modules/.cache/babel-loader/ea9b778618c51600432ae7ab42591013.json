{"ast":null,"code":"import validator from \"validator\";\nimport { NAME_UPDATE, EMAIL_UPDATE, MESSAGE_UPDATE, SUBMITTED, ERROR, LOADING, FETCH_SUCCESS, FETCH_FAILURE, RESET } from \"./action_types\";\nexport function nameUpdate(name) {\n  return function (dispatch) {\n    dispatch({\n      type: NAME_UPDATE,\n      payload: name\n    });\n  };\n}\nexport function emailUpdate(email) {\n  return function (dispatch) {\n    dispatch({\n      type: EMAIL_UPDATE,\n      payload: email\n    });\n  };\n}\nexport function messageUpdate(message) {\n  return function (dispatch) {\n    dispatch({\n      type: MESSAGE_UPDATE,\n      payload: message\n    });\n  };\n}\nexport function submitted() {\n  return function (dispatch) {\n    dispatch({\n      type: SUBMITTED,\n      payload: true\n    });\n  };\n}\nexport function onError(foundError) {\n  return function (dispatch) {\n    dispatch({\n      type: ERROR,\n      payload: true,\n      foundError: foundError\n    });\n  };\n}\nexport function validateForm() {\n  return function (dispatch, getState) {\n    var possibleErrors = [];\n\n    if (validator.isEmpty(getState().ContactReducer.form.name)) {\n      possibleErrors.push(1);\n    }\n\n    if (!validator.isEmail(getState().ContactReducer.form.email)) {\n      possibleErrors.push(2);\n    }\n\n    if (validator.isEmpty(getState().ContactReducer.form.email)) {\n      possibleErrors.push(3);\n    }\n\n    if (validator.isEmpty(getState().ContactReducer.form.message)) {\n      possibleErrors.push(4);\n    }\n\n    possibleErrors.length > 0 ? dispatch(onError(possibleErrors)) : dispatch(fetchStart());\n  };\n}\nexport function fetchStart() {\n  return function (dispatch, getState) {\n    var data = {\n      name: getState().ContactReducer.form.name,\n      email: getState().ContactReducer.form.email,\n      message: getState().ContactReducer.form.message\n    };\n    dispatch(loading());\n    fetch(\"http://localhost:3000/contact\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      if (res.ok) {\n        dispatch(fetchSuccess());\n        console.log(res.body);\n      } else {\n        dispatch(fetchFailure());\n        console.log(\"failure\");\n      }\n    }).catch(function (error) {\n      dispatch(fetchFailure());\n      console.error(\"Error:\", error);\n    });\n  };\n}\nexport function loading() {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING,\n      payload: true\n    });\n  };\n}\nexport function fetchSuccess() {\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_SUCCESS,\n      payload: true\n    });\n  };\n}\nexport function fetchFailure() {\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_FAILURE,\n      payload: true\n    });\n  };\n}\nexport function reset() {\n  return function (dispatch) {\n    dispatch({\n      type: RESET,\n      payload: \"\"\n    });\n  };\n}","map":{"version":3,"sources":["/Users/macbookpro/Desktop/tansu-first-project/client/src/actions/contactActions/actions.js"],"names":["validator","NAME_UPDATE","EMAIL_UPDATE","MESSAGE_UPDATE","SUBMITTED","ERROR","LOADING","FETCH_SUCCESS","FETCH_FAILURE","RESET","nameUpdate","name","dispatch","type","payload","emailUpdate","email","messageUpdate","message","submitted","onError","foundError","validateForm","getState","possibleErrors","isEmpty","ContactReducer","form","push","isEmail","length","fetchStart","data","loading","fetch","method","body","JSON","stringify","headers","then","res","ok","fetchSuccess","console","log","fetchFailure","catch","error","reset"],"mappings":"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","sourcesContent":["import validator from \"validator\";\nimport {\n  NAME_UPDATE,\n  EMAIL_UPDATE,\n  MESSAGE_UPDATE,\n  SUBMITTED,\n  ERROR,\n  LOADING,\n  FETCH_SUCCESS,\n  FETCH_FAILURE,\n  RESET\n} from \"./action_types\";\n\nexport function nameUpdate(name) {\n  return function(dispatch) {\n    dispatch({\n      type: NAME_UPDATE,\n      payload: name\n    });\n  };\n}\n\nexport function emailUpdate(email) {\n  return function(dispatch) {\n    dispatch({\n      type: EMAIL_UPDATE,\n      payload: email\n    });\n  };\n}\n\nexport function messageUpdate(message) {\n  return function(dispatch) {\n    dispatch({\n      type: MESSAGE_UPDATE,\n      payload: message\n    });\n  };\n}\n\nexport function submitted() {\n  return function(dispatch) {\n    dispatch({\n      type: SUBMITTED,\n      payload: true\n    });\n  };\n}\n\nexport function onError(foundError) {\n  return function(dispatch) {\n    dispatch({\n      type: ERROR,\n      payload: true,\n      foundError: foundError\n    });\n  };\n}\n\nexport function validateForm() {\n  return function(dispatch, getState) {\n    const possibleErrors = [];\n    if (validator.isEmpty(getState().ContactReducer.form.name)) {\n      possibleErrors.push(1);\n    }\n    if (!validator.isEmail(getState().ContactReducer.form.email)) {\n      possibleErrors.push(2);\n    }\n    if (validator.isEmpty(getState().ContactReducer.form.email)) {\n      possibleErrors.push(3);\n    }\n    if (validator.isEmpty(getState().ContactReducer.form.message)) {\n      possibleErrors.push(4);\n    }\n    possibleErrors.length > 0\n      ? dispatch(onError(possibleErrors))\n      : dispatch(fetchStart());\n  };\n}\n\nexport function fetchStart() {\n  return function(dispatch, getState) {\n    const data = {\n      name: getState().ContactReducer.form.name,\n      email: getState().ContactReducer.form.email,\n      message: getState().ContactReducer.form.message\n    };\n    dispatch(loading());\n    fetch(\"http://localhost:3000/contact\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => {\n        if (res.ok) {\n          dispatch(fetchSuccess());\n          console.log(res.body);\n        } else {\n          dispatch(fetchFailure());\n          console.log(\"failure\");\n        }\n      })\n      .catch(error => {\n        dispatch(fetchFailure());\n        console.error(\"Error:\", error);\n      });\n  };\n}\n\nexport function loading() {\n  return function(dispatch) {\n    dispatch({\n      type: LOADING,\n      payload: true\n    });\n  };\n}\n\nexport function fetchSuccess() {\n  return function(dispatch) {\n    dispatch({\n      type: FETCH_SUCCESS,\n      payload: true\n    });\n  };\n}\n\nexport function fetchFailure() {\n  return function(dispatch) {\n    dispatch({\n      type: FETCH_FAILURE,\n      payload: true\n    });\n  };\n}\n\nexport function reset() {\n  return function(dispatch) {\n    dispatch({\n      type: RESET,\n      payload: \"\"\n    });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}